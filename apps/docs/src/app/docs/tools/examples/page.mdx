# Tools Examples

Practical examples and use cases for FMP Tools integration.

## Overview

This page provides real-world examples of how to use FMP Tools in various scenarios. Each example includes complete code and explanations.

## Basic Chatbot Example

A simple financial chatbot using Vercel AI SDK.

### Setup

<CodeBlock language="typescript" filename="app/api/chat/route.ts">
{`import { openai } from '@ai-sdk/openai';
import { streamText, convertToModelMessages } from 'ai';
import { fmpTools } from 'fmp-tools/vercel-ai';

export async function POST(req: Request) {
  const { messages } = await req.json();

const result = streamText({
model: openai('gpt-4o-mini'),
messages: convertToModelMessages(messages),
tools: fmpTools,
stopWhen: stepCountIs(3),
});

return result.toUIMessageStreamResponse();
}`}

</CodeBlock>

### React Component

<CodeBlock language="typescript" filename="components/FinancialChat.tsx">
{`'use client';

import { useChat } from 'ai/react';

export function FinancialChat() {
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: '/api/chat',
  });

return (

<div className="max-w-4xl mx-auto p-6">
<div className="mb-6">
<h1 className="text-2xl font-bold mb-2">Financial Assistant</h1>
<p className="text-gray-600">
Ask me about stocks, financial data, market performance, and more!
</p>
</div>

      <div className="space-y-4 mb-6 max-h-96 overflow-y-auto">
        {messages.map((message) => (
          <div
            key={message.id}
            className={\`p-4 rounded-lg \${message.role === 'user'
              ? 'bg-blue-100 dark:bg-blue-900 ml-8'
              : 'bg-gray-100 dark:bg-gray-800 mr-8'
            }\`}
          >
            <div className="font-semibold mb-2">
              {message.role === 'user' ? 'You' : 'Assistant'}
            </div>
            <div className="whitespace-pre-wrap">{message.content}</div>
          </div>
        ))}
      </div>

      <form onSubmit={handleSubmit} className="flex gap-2">
        <input
          value={input}
          onChange={handleInputChange}
          placeholder="Ask about stocks, financial data, or market information..."
          className="flex-1 p-3 border rounded-lg"
          disabled={isLoading}
        />
        <button
          type="submit"
          disabled={isLoading}
          className="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"
        >
          {isLoading ? 'Thinking...' : 'Send'}
        </button>
      </form>
    </div>

);
}`}

</CodeBlock>

## Stock Analysis Dashboard

A dashboard that combines multiple tools for comprehensive stock analysis.

### API Route

<CodeBlock language="typescript" filename="app/api/stock-analysis/route.ts">
{`import { openai } from '@ai-sdk/openai';
import { streamText, convertToModelMessages, stepCountIs } from 'ai';
import { 
  getStockQuote, 
  getCompanyProfile, 
  getFinancialRatios,
  getBalanceSheet 
} from 'fmp-tools/vercel-ai';

const stockAnalysisTools = {
getStockQuote,
getCompanyProfile,
getFinancialRatios,
getBalanceSheet,
};

export async function POST(req: Request) {
  const { messages } = await req.json();

const result = streamText({
model: openai('gpt-4o-mini'),
messages: convertToModelMessages(messages),
tools: stockAnalysisTools,
stopWhen: stepCountIs(5),
system: \`You are a financial analyst assistant. When analyzing stocks, provide comprehensive insights including: - Current market position and recent performance - Company overview and business model - Key financial ratios and their implications - Balance sheet strength and financial health - Investment recommendations based on the data

    Always explain what each metric means and its significance for investors.\`,

});

return result.toUIMessageStreamResponse();
}`}

</CodeBlock>

### Dashboard Component

<CodeBlock language="typescript" filename="components/StockAnalysisDashboard.tsx">
{`'use client';

import { useChat } from 'ai/react';
import { useState } from 'react';

export function StockAnalysisDashboard() {
  const [selectedStock, setSelectedStock] = useState('');
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: '/api/stock-analysis',
  });

const handleStockAnalysis = (symbol: string) => {
setSelectedStock(symbol);
const analysisPrompt = \`Please provide a comprehensive analysis of \${symbol} including current price, company profile, financial ratios, and balance sheet data.\`;
// This would trigger the chat with the analysis prompt
};

return (

<div className="max-w-6xl mx-auto p-6">
<div className="mb-8">
<h1 className="text-3xl font-bold mb-4">Stock Analysis Dashboard</h1>
<p className="text-gray-600 mb-6">
Get comprehensive stock analysis with real-time data and financial insights.
</p>

        <div className="flex gap-4 mb-6">
          {['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA'].map((symbol) => (
            <button
              key={symbol}
              onClick={() => handleStockAnalysis(symbol)}
              className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
            >
              Analyze {symbol}
            </button>
          ))}
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div className="space-y-4">
          <h2 className="text-xl font-semibold">Analysis Results</h2>
          <div className="space-y-4 max-h-96 overflow-y-auto">
            {messages.map((message) => (
              <div
                key={message.id}
                className={\`p-4 rounded-lg \${message.role === 'user'
                  ? 'bg-blue-100 dark:bg-blue-900'
                  : 'bg-gray-100 dark:bg-gray-800'
                }\`}
              >
                <div className="font-semibold mb-2">
                  {message.role === 'user' ? 'You' : 'Analyst'}
                </div>
                <div className="whitespace-pre-wrap">{message.content}</div>
              </div>
            ))}
          </div>
        </div>

        <div className="space-y-4">
          <h2 className="text-xl font-semibold">Custom Analysis</h2>
          <form onSubmit={handleSubmit} className="space-y-4">
            <input
              value={input}
              onChange={handleInputChange}
              placeholder="Ask for specific stock analysis or financial insights..."
              className="w-full p-3 border rounded-lg"
              disabled={isLoading}
            />
            <button
              type="submit"
              disabled={isLoading}
              className="w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50"
            >
              {isLoading ? 'Analyzing...' : 'Get Analysis'}
            </button>
          </form>
        </div>
      </div>
    </div>

);
}`}

</CodeBlock>

## Market Research Assistant

A specialized assistant for market research and sector analysis.

### API Route

<CodeBlock language="typescript" filename="app/api/market-research/route.ts">
{`import { openai } from '@ai-sdk/openai';
import { streamText, convertToModelMessages } from 'ai';
import { 
  getMarketPerformance, 
  getSectorPerformance, 
  getGainers, 
  getLosers,
  getMostActive 
} from 'fmp-tools/vercel-ai';

const marketResearchTools = {
getMarketPerformance,
getSectorPerformance,
getGainers,
getLosers,
getMostActive,
};

export async function POST(req: Request) {
  const { messages } = await req.json();

const result = streamText({
model: openai('gpt-4o-mini'),
messages: convertToModelMessages(messages),
tools: marketResearchTools,
stopWhen: stepCountIs(4),
system: \`You are a market research specialist. When analyzing market data, provide insights on: - Overall market trends and sentiment - Sector performance and rotation - Notable gainers and losers with context - Trading volume and activity patterns - Market opportunities and risks

    Focus on actionable insights for traders and investors.\`,

});

return result.toUIMessageStreamResponse();
}`}

</CodeBlock>

### Market Research Component

<CodeBlock language="typescript" filename="components/MarketResearch.tsx">
{`'use client';

import { useChat } from 'ai/react';

export function MarketResearch() {
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: '/api/market-research',
  });

const quickQueries = [
"What's the overall market performance today?",
"Which sectors are performing best?",
"Show me today's top gainers and losers",
"What's the most active trading activity?",
];

return (

<div className="max-w-5xl mx-auto p-6">
<div className="mb-8">
<h1 className="text-3xl font-bold mb-4">Market Research Assistant</h1>
<p className="text-gray-600 mb-6">
Get real-time market insights, sector analysis, and trading opportunities.
</p>

        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
          {quickQueries.map((query, index) => (
            <button
              key={index}
              onClick={() => {
                // This would trigger the chat with the query
                console.log('Quick query:', query);
              }}
              className="p-3 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 text-sm"
            >
              {query}
            </button>
          ))}
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div className="lg:col-span-2 space-y-4">
          <h2 className="text-xl font-semibold">Market Analysis</h2>
          <div className="space-y-4 max-h-96 overflow-y-auto">
            {messages.map((message) => (
              <div
                key={message.id}
                className={\`p-4 rounded-lg \${message.role === 'user'
                  ? 'bg-blue-100 dark:bg-blue-900'
                  : 'bg-gray-100 dark:bg-gray-800'
                }\`}
              >
                <div className="font-semibold mb-2">
                  {message.role === 'user' ? 'You' : 'Market Analyst'}
                </div>
                <div className="whitespace-pre-wrap">{message.content}</div>
              </div>
            ))}
          </div>
        </div>

        <div className="space-y-4">
          <h2 className="text-xl font-semibold">Custom Research</h2>
          <form onSubmit={handleSubmit} className="space-y-4">
            <textarea
              value={input}
              onChange={handleInputChange}
              placeholder="Ask about market trends, sector performance, or specific analysis..."
              className="w-full p-3 border rounded-lg h-32 resize-none"
              disabled={isLoading}
            />
            <button
              type="submit"
              disabled={isLoading}
              className="w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50"
            >
              {isLoading ? 'Researching...' : 'Get Research'}
            </button>
          </form>
        </div>
      </div>
    </div>

);
}`}

</CodeBlock>

## ETF Portfolio Analyzer

A specialized tool for ETF analysis and portfolio insights.

### API Route

<CodeBlock language="typescript" filename="app/api/etf-analyzer/route.ts">
{`import { openai } from '@ai-sdk/openai';
import { streamText, convertToModelMessages } from 'ai';
import { 
  getETFProfile, 
  getETFHoldings,
  getStockQuote 
} from 'fmp-tools/vercel-ai';

const etfAnalysisTools = {
getETFProfile,
getETFHoldings,
getStockQuote, // For analyzing individual holdings
};

export async function POST(req: Request) {
  const { messages } = await req.json();

const result = streamText({
model: openai('gpt-4o-mini'),
messages: convertToModelMessages(messages),
tools: etfAnalysisTools,
stopWhen: stepCountIs(6),
system: \`You are an ETF portfolio analyst. When analyzing ETFs, provide insights on: - ETF overview, strategy, and investment objective - Top holdings and sector allocation - Performance metrics and risk profile - Expense ratios and trading information - Portfolio diversification benefits - Comparison with similar ETFs when relevant

    Focus on helping investors understand the ETF's role in a portfolio.\`,

});

return result.toUIMessageStreamResponse();
}`}

</CodeBlock>

### ETF Analyzer Component

<CodeBlock language="typescript" filename="components/ETFAnalyzer.tsx">
{`'use client';

import { useChat } from 'ai/react';
import { useState } from 'react';

export function ETFAnalyzer() {
  const [selectedETF, setSelectedETF] = useState('');
  const { messages, input, handleInputChange, handleSubmit, isLoading } = useChat({
    api: '/api/etf-analyzer',
  });

const popularETFs = [
{ symbol: 'SPY', name: 'SPDR S&P 500 ETF' },
{ symbol: 'QQQ', name: 'Invesco QQQ Trust' },
{ symbol: 'VTI', name: 'Vanguard Total Stock Market ETF' },
{ symbol: 'VEA', name: 'Vanguard FTSE Developed Markets ETF' },
{ symbol: 'VWO', name: 'Vanguard FTSE Emerging Markets ETF' },
{ symbol: 'AGG', name: 'iShares Core U.S. Aggregate Bond ETF' },
];

const handleETFAnalysis = (symbol: string) => {
setSelectedETF(symbol);
const analysisPrompt = \`Please provide a comprehensive analysis of \${symbol} ETF including its profile, holdings, and portfolio insights.\`;
// This would trigger the chat with the analysis prompt
};

return (

<div className="max-w-6xl mx-auto p-6">
<div className="mb-8">
<h1 className="text-3xl font-bold mb-4">ETF Portfolio Analyzer</h1>
<p className="text-gray-600 mb-6">
Analyze ETFs, understand holdings, and get portfolio insights.
</p>

        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6">
          {popularETFs.map((etf) => (
            <button
              key={etf.symbol}
              onClick={() => handleETFAnalysis(etf.symbol)}
              className="p-4 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-950/40"
            >
              <div className="font-semibold text-blue-600 dark:text-blue-400">{etf.symbol}</div>
              <div className="text-xs text-gray-600 dark:text-gray-400 mt-1">{etf.name}</div>
            </button>
          ))}
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <div className="space-y-4">
          <h2 className="text-xl font-semibold">ETF Analysis</h2>
          <div className="space-y-4 max-h-96 overflow-y-auto">
            {messages.map((message) => (
              <div
                key={message.id}
                className={\`p-4 rounded-lg \${message.role === 'user'
                  ? 'bg-blue-100 dark:bg-blue-900'
                  : 'bg-gray-100 dark:bg-gray-800'
                }\`}
              >
                <div className="font-semibold mb-2">
                  {message.role === 'user' ? 'You' : 'ETF Analyst'}
                </div>
                <div className="whitespace-pre-wrap">{message.content}</div>
              </div>
            ))}
          </div>
        </div>

        <div className="space-y-4">
          <h2 className="text-xl font-semibold">Custom ETF Research</h2>
          <form onSubmit={handleSubmit} className="space-y-4">
            <input
              value={input}
              onChange={handleInputChange}
              placeholder="Enter ETF symbol or ask about specific ETFs..."
              className="w-full p-3 border rounded-lg"
              disabled={isLoading}
            />
            <button
              type="submit"
              disabled={isLoading}
              className="w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50"
            >
              {isLoading ? 'Analyzing...' : 'Analyze ETF'}
            </button>
          </form>
        </div>
      </div>
    </div>

);
}`}

</CodeBlock>

## Next Steps

- [View Tool Categories](/docs/tools/categories) - Explore all available tools
- [Vercel AI SDK Integration](/docs/tools/vercel-ai) - Learn about the integration
- [Best Practices](/docs/tools/best-practices) - Learn best practices for building robust applications
- [Error Handling](/docs/tools/error-handling) - Learn about comprehensive error handling
- [API Documentation](/docs/api) - For direct API access
- [GitHub Repository](https://github.com/e-roy/fmp-node-wrapper) - Source code and issues
